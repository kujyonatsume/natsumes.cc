/* 字體載入：優先本機，非必要不強行下載龐大 CJK 檔案 */
:root {
    --font-sans: "Noto Sans TC", "PingFang TC", "Microsoft JhengHei", "Segoe UI", "Inter", "Helvetica Neue", Arial, sans-serif;
    --font-serif: "Noto Serif TC", "Source Han Serif TC", "Songti TC", serif;
    --font-mono: "JetBrains Mono", "SFMono-Regular", Menlo, Consolas, monospace;

    /* 字級與節奏 */
    --step--1: clamp(0.85rem, 0.78rem + 0.2vw, 0.95rem);
    --step-0: clamp(1.00rem, 0.92rem + 0.35vw, 1.125rem);
    /* 16→18px */
    --step-1: clamp(1.25rem, 1.05rem + 0.8vw, 1.5rem);
    --step-2: clamp(1.56rem, 1.25rem + 1.3vw, 1.88rem);
    --step-3: clamp(1.95rem, 1.45rem + 2.0vw, 2.4rem);
    --step-4: clamp(2.44rem, 1.7rem + 3.0vw, 3.0rem);

    --lh: 1.7;
    --lh-tight: 1.35;
    --max-prose: 68ch;
}

html {
    font-size: 100%;
    text-size-adjust: 100%;
}

body {
    font-family: var(--font-sans);
    font-size: var(--step-0);
    line-height: var(--lh);
    letter-spacing: 0.01em;
    -webkit-font-smoothing: antialiased;
    color: #0f172a;
    /* slate-900 */
    background: #fff;
}

/* 版寬與自動平衡換行 */
.prose,
main,
article {
    max-width: var(--max-prose);
    margin-inline: auto;
    padding-inline: 1rem;
    text-wrap: pretty;
}

h1,
h2,
h3 {
    font-family: var(--font-serif);
    line-height: var(--lh-tight);
    font-feature-settings: "liga", "clig", "kern";
    text-wrap: balance;
}

h1 {
    font-size: var(--step-4);
    letter-spacing: 0.01em;
}

h2 {
    font-size: var(--step-3);
    letter-spacing: 0.005em;
}

h3 {
    font-size: var(--step-2);
}

p {
    margin: 0.8em 0;
    hyphens: auto;
    line-break: strict;
    word-break: keep-all;
}

small,
.caption {
    font-size: var(--step--1);
    color: #475569;
}

/* 清晰的段落與清單 */
ul,
ol {
    padding-inline-start: 1.5em;
}

li+li {
    margin-top: 0.25em;
}

/* 引文與程式碼 */
blockquote {
    border-inline-start: 3px solid #e2e8f0;
    padding: .5rem 1rem;
    color: #334155;
    background: #f8fafc;
}

code,
pre {
    font-family: var(--font-mono);
    font-size: 0.95em;
}

pre {
    background: #0b1220;
    color: #e5e7eb;
    padding: 1rem;
    border-radius: 12px;
    overflow: auto;
}

/* 圖片與註解 */
figure {
    margin: 1.2rem 0;
}

figcaption {
    font-size: var(--step--1);
    color: #64748b;
    text-align: center;
}

/* 更佳的中英文混排 */
:where(h1, h2, h3, p, li, blockquote) {
    text-underline-position: from-font;
    text-rendering: optimizeLegibility;
}

/* 行高與段落在窄螢幕的微調 */
@media (max-width: 480px) {
    :root {
        --lh: 1.8;
    }
}